<!DOCTYPE html>
<html>
<head>
	<title>Charts.js</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>


<body>
    <h1 id="faveWord">{{ faveWord }}</h1>
    <h1 id="name">Hello {{ name }}</h1>

    <div class="dropdown">
  <button class="btn btn-secondary dropdown-toggle" type="button" id="#topPhrases" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" >
    # of Most Frequent Phrases
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
    <a class="dropdown-item" onclick = "getTopPhrases(1)">One</a>
    <a class="dropdown-item" onclick = "getTopPhrases(3)">Three</a>
    <a class="dropdown-item" onclick = "getTopPhrases(5)">Five</a>
  </div>
</div>

    <canvas id="myChart"></canvas>







<script>

        function getTopPhrases(n){
            var faveWord = document.getElementById('faveWord').innerHTML;
            var name = document.getElementById('name').innerHTML;
            var ctx = document.getElementById('myChart').getContext('2d');
            // var random;
            var labels = [];
            var counts = [];
            var entries = JSON.parse(faveWord);
            var num = parseInt(n);

            for (var i = 0, num = parseInt(n); i < num; ++i) {
                 var entry = entries[i];
                labels.push(entry[0]);
                counts.push(entry[1]);
            }

            var chart = new Chart(ctx, {
            // The type of chart we want to create
            type: 'horizontalBar',
            // The data for our dataset
            data: {
                labels: labels,
                datasets: [{
                    label: "# Times the phrase is used",
                    backgroundColor: 'rgb(255, 99, 132)',
                    borderColor: 'rgb(255, 99, 132)',
                    data: counts,
                    }]
                },
            // Configuration options go here
                options: {
                    scales: {
                        xAxes: [{
                            display: true,
                            ticks: {
                                suggestedMin: 0,    // minimum will be 0, unless there is a lower value.
                                // OR //
                                beginAtZero: true   // minimum value will be 0.
                            }
                        }]
                    }}
            });
        }
</script>

<script type="text/javascript" src="d3.v5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

</body>
</html>